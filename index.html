<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CiteCase 2026 - Legal Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script async src="https://tally.so/widgets/embed.js"></script>
    <style>
        body { font-family: Georgia, 'Times New Roman', Times, serif; background-color: #f8fafc; }
        .glass-header { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); }
        .highlight { background-color: #fef08a; font-weight: 600; padding: 0 2px; border-radius: 2px; color: #854d0e; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        @media (max-width: 768px) {
            .responsive-table thead { display: none; }
            .responsive-table tr { display: flex; flex-direction: column; padding: 1rem; border-bottom: 1px solid #e2e8f0; background: white; margin-bottom: 0.5rem; border-radius: 0.75rem; }
            .responsive-table td { display: block; padding: 0.25rem 0 !important; border: none !important; }
            .responsive-table td:last-child { margin-top: 0.75rem; text-align: left !important; display: flex !important; gap: 0.5rem; justify-content: flex-start; }
        }
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        .share-modal { backdrop-filter: blur(4px); background: rgba(15, 23, 42, 0.6); }
    </style>
</head>
<body class="min-h-screen pb-20">

    <nav class="glass-header sticky top-0 z-50 border-b border-slate-200 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 md:px-6 py-3 md:py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2 md:space-x-3">
                    <div class="bg-indigo-600 p-1.5 md:p-2 rounded-xl shadow-md shadow-indigo-200">
                        <i class="fas fa-balance-scale text-white text-lg md:text-xl"></i>
                    </div>
                    <div>
                        <h1 class="font-bold text-slate-900 text-base md:text-xl leading-none">CiteCase</h1>
                        <span class="text-[9px] md:text-[10px] text-indigo-600 font-bold uppercase tracking-widest">2026 INSC</span>
                    </div>
                </div>
                <div class="flex items-center space-x-2 md:space-x-4">
                    <a href="https://citecase.in/register" target="_blank" class="flex items-center px-4 py-2 bg-indigo-600 text-white rounded-xl text-[10px] sm:text-xs font-bold shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-all">
                        <i class="fas fa-crown mr-2"></i> SUBSCRIBE
                    </a>
                    <div class="flex items-center space-x-3 hidden md:flex">
                        <div id="stats" class="text-[11px] font-bold text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-full border border-indigo-100 uppercase tracking-tight">Loading Database...</div>
                        <span id="live-clock" class="text-xs font-mono text-slate-500 bg-slate-100 px-3 py-1 rounded-full border border-slate-200">14 Jan 2026</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main id="view-search" class="max-w-5xl mx-auto px-4 md:px-6 pt-6">
        <div class="relative group mb-6 md:mb-8">
            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <i class="fas fa-search text-slate-400 group-focus-within:text-indigo-500 transition-colors"></i>
            </div>
            <input type="text" id="search-input" placeholder="Search by Case Name, Citation, or Law Tag..." class="block w-full pl-11 pr-4 py-3 md:py-4 bg-white border border-slate-200 rounded-2xl shadow-sm focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all text-base md:text-lg outline-none placeholder:text-slate-300">
        </div>

        <div id="filter-container" class="flex flex-wrap gap-2 mb-6 md:mb-8">
            <button id="filter-all" onclick="clearFilters()" class="filter-pill bg-indigo-600 text-white px-3 py-1.5 md:px-4 rounded-lg text-[11px] md:text-xs font-bold shadow-sm transition-all border border-indigo-600">All</button>
        </div>

        <div class="md:bg-white md:rounded-2xl md:shadow-xl md:shadow-slate-200/50 md:border md:border-slate-200 md:overflow-hidden relative">
            <div class="overflow-x-auto">
                <table class="w-full text-left responsive-table" id="judgments-table">
                    <thead class="bg-slate-50/80 border-b border-slate-200 hidden md:table-header-group">
                        <tr>
                            <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Citation</th>
                            <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest">Case Name</th>
                            <th class="px-6 py-4 text-[11px] font-bold text-slate-400 uppercase tracking-widest text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="case-results" class="divide-y divide-slate-100"></tbody>
                </table>
            </div>

            <div id="empty-state" class="hidden flex flex-col items-center justify-center py-20 text-slate-400">
                <i class="fas fa-folder-open text-5xl mb-4 opacity-10"></i>
                <p class="text-sm font-medium">No matches found in the current series.</p>
            </div>

            <div id="lock-section" class="hidden p-8 text-center bg-slate-50 border-t border-slate-100">
                <div class="max-w-md mx-auto">
                    <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm border border-slate-200">
                        <i class="fas fa-lock text-slate-300 text-2xl"></i>
                    </div>
                    <h3 class="text-slate-900 font-bold text-lg mb-6">Unlock Full 2026 Database</h3>
                    <div class="flex flex-col space-y-3" id="unlock-form">
                        <input type="text" id="unlock-code" maxlength="8" placeholder="Enter Access Code" class="w-full px-4 py-3 rounded-xl border border-slate-200 outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 text-center font-mono tracking-widest uppercase text-lg">
                        <p id="unlock-error" class="hidden text-rose-600 text-xs font-bold bg-rose-50 p-3 rounded-lg border border-rose-100">
                            If you are our subscriber, please contact us on Whatsapp to get the Access Code
                        </p>
                    </div>
                </div>
            </div>

            <div id="show-more-container" class="p-6 bg-slate-50 border-t border-slate-100 text-center hidden">
                <button onclick="showMore()" class="px-6 py-2 bg-white border border-slate-200 text-indigo-600 font-bold text-xs rounded-xl shadow-sm hover:bg-indigo-50 transition-all uppercase tracking-wide">Load More</button>
            </div>
        </div>
    </main>

    <!-- Share Modal -->
    <div id="share-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 share-modal" onclick="closeShareOutside(event)">
        <div class="bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200" id="share-container">
            <div class="p-6 border-b border-slate-100 flex items-center justify-between">
                <h4 class="font-bold text-slate-900">Share Judgment</h4>
                <button onclick="closeShare()" class="text-slate-400 hover:text-slate-600"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-6 grid grid-cols-3 gap-6" id="share-links"></div>
            <div class="p-4 bg-slate-50 text-center">
                <p class="text-[10px] text-slate-400 font-medium uppercase tracking-tighter">Spread the knowledge with CiteCase</p>
            </div>
        </div>
    </div>

    <script>
        /* STEP 1: REPLACE THIS URL WITH YOUR "RAW" GITHUB URL
           See github_sync_guide.md for instructions.
        */
        const GITHUB_JSON_URL = "https://raw.githubusercontent.com/citecase/2026/refs/heads/main/judgments.json";

        // FALLBACK DATA: This will show if GitHub is disconnected or the URL is wrong.
        const FALLBACK_CASES = [
            { id: 61, name: "Pradip Monu Arunkumar Chhotelal Tiwari v. State of Gujarat", citation: "", cat: "Constitution, Article 136 Constitution", link: "https://www.caseciter.com/pradip-monu-arunkumar-chhotelal-tiwari-v-state-of-gujarat-slp-failure-to-disclose-all-material-facts/" },
            { id: 60, name: "Union of India & Anr. v. Paresh Chandra Mondal", citation: "", cat: "Provident Funds Act", link: "https://www.caseciter.com/union-of-india-anr-v-paresh-chandra-mondal-order-dated-07-01-2026/#gsc.tab=0" }
        ];

        let cases = []; 
        let activeFilters = [];
        let isUnlocked = false;
        let displayLimit = 20;
        let isTagsExpanded = false;
        const FREE_LIMIT = 10;

        async function loadData() {
            try {
                const response = await fetch(GITHUB_JSON_URL);
                if (!response.ok) throw new Error("Sync Failed");
                cases = await response.json();
                console.log("Database Sync Successful");
            } catch (err) {
                console.warn("Using Fallback Local Database");
                cases = FALLBACK_CASES;
            }
            renderFilterTags();
            handleFilter();
        }

        function getUniqueTags() {
            const counts = {};
            cases.forEach(c => { if (c.cat) { c.cat.split(',').forEach(t => { const tag = t.trim(); if (tag && tag !== 'Important') counts[tag] = (counts[tag] || 0) + 1; }); } });
            return Object.keys(counts).sort((a, b) => counts[b] - counts[a]);
        }

        function renderFilterTags() {
            const sortedOthers = getUniqueTags();
            const filterContainer = document.getElementById('filter-container');
            if(!filterContainer) return;
            filterContainer.innerHTML = '<button id="filter-all" onclick="clearFilters()" class="filter-pill bg-indigo-600 text-white px-3 py-1.5 md:px-4 rounded-lg text-[11px] md:text-xs font-bold shadow-sm transition-all border border-indigo-600">All</button>';
            const hasImportant = cases.some(c => c.cat && c.cat.includes('Important'));
            if (hasImportant) createTagButton('Important');
            const limit = 10 - (hasImportant ? 2 : 1);
            const othersToShow = isTagsExpanded ? sortedOthers : sortedOthers.slice(0, Math.max(0, limit));
            othersToShow.forEach(tag => createTagButton(tag));
            if (!isTagsExpanded && sortedOthers.length > limit) {
                const expandBtn = document.createElement('button');
                expandBtn.className = 'px-3 py-1.5 text-[11px] md:text-xs font-bold text-indigo-600 hover:underline transition-all';
                expandBtn.innerText = `+ ${sortedOthers.length - limit} more tags`;
                expandBtn.onclick = handleTagExpansion;
                filterContainer.appendChild(expandBtn);
            }
        }

        function createTagButton(tag) {
            const isSelected = activeFilters.includes(tag);
            const btn = document.createElement('button');
            const isImportant = tag === 'Important';
            btn.className = `filter-pill px-3 py-1.5 md:px-4 rounded-lg text-[11px] md:text-xs font-bold transition-all border ${isSelected ? (isImportant ? 'bg-rose-600 text-white border-rose-600' : 'bg-indigo-600 text-white border-indigo-600') : (isImportant ? 'bg-white text-rose-600 border-rose-200 hover:bg-rose-50' : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50')}`;
            btn.innerText = tag;
            btn.onclick = () => toggleFilter(tag);
            document.getElementById('filter-container').appendChild(btn);
        }

        function handleTagExpansion() {
            if (isUnlocked) { isTagsExpanded = true; renderFilterTags(); }
            else { 
                const lockSec = document.getElementById('lock-section');
                if(lockSec) lockSec.scrollIntoView({ behavior: 'smooth' }); 
                const codeInput = document.getElementById('unlock-code');
                if(codeInput) codeInput.focus(); 
            }
        }

        function handleUnlockInput(e) {
            const code = e.target.value.trim();
            if (code.length === 8) {
                if (code === "14012026") {
                    isUnlocked = true;
                    document.getElementById('unlock-error')?.classList.add('hidden');
                    e.target.blur();
                    renderFilterTags(); handleFilter();
                } else {
                    document.getElementById('unlock-error')?.classList.remove('hidden');
                    document.getElementById('unlock-form')?.classList.add('shake');
                    setTimeout(() => document.getElementById('unlock-form')?.classList.remove('shake'), 500);
                }
            }
        }

        function openShare(name, citation, url) {
            const citePart = citation ? `, ${citation}` : '';
            const coreInfo = `${name}${citePart}`;
            const genericMsg = `Thanks to CiteCase.in, I read this #SupremeCourt judgment: ${coreInfo}. Read at: ${url}`;
            const encGen = encodeURIComponent(genericMsg);
            const shareLinks = document.getElementById('share-links');
            if(!shareLinks) return;
            let html = "";
            if (navigator.share) {
                html += `<button onclick="triggerSystemShare('${name.replace(/'/g, "\\'")}', '${citation}', '${url}')" class="flex flex-col items-center group"><div class="w-12 h-12 bg-amber-500 text-white rounded-2xl flex items-center justify-center mb-2 shadow-lg group-hover:scale-110 transition-transform"><i class="fas fa-note-sticky text-xl"></i></div><span class="text-[9px] font-bold text-slate-500 uppercase">Save to Notes</span></button>`;
            }
            html += `
                <a href="https://api.whatsapp.com/send?text=${encGen}" target="_blank" class="flex flex-col items-center group"><div class="w-12 h-12 bg-green-500 text-white rounded-2xl flex items-center justify-center mb-2 shadow-lg group-hover:scale-110 transition-transform"><i class="fab fa-whatsapp text-xl"></i></div><span class="text-[9px] font-bold text-slate-500 uppercase">WhatsApp</span></a>
                <a href="https://twitter.com/intent/tweet?text=${encGen}" target="_blank" class="flex flex-col items-center group"><div class="w-12 h-12 bg-black text-white rounded-2xl flex items-center justify-center mb-2 shadow-lg group-hover:scale-110 transition-transform"><i class="fa-brands fa-x-twitter text-xl"></i></div><span class="text-[9px] font-bold text-slate-500 uppercase">X</span></a>
                <a href="https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encGen}" target="_blank" class="flex flex-col items-center group"><div class="w-12 h-12 bg-sky-500 text-white rounded-2xl flex items-center justify-center mb-2 shadow-lg group-hover:scale-110 transition-transform"><i class="fab fa-telegram-plane text-xl"></i></div><span class="text-[9px] font-bold text-slate-500 uppercase">Telegram</span></a>
                <a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}" target="_blank" class="flex flex-col items-center group"><div class="w-12 h-12 bg-blue-700 text-white rounded-2xl flex items-center justify-center mb-2 shadow-lg group-hover:scale-110 transition-transform"><i class="fab fa-facebook-f text-xl"></i></div><span class="text-[9px] font-bold text-slate-500 uppercase">Facebook</span></a>
            `;
            shareLinks.innerHTML = html;
            const modal = document.getElementById('share-modal');
            if(modal) { modal.classList.remove('hidden'); modal.classList.add('flex'); }
        }

        async function triggerSystemShare(name, citation, url) {
            const msg = `Thanks to CiteCase.in, I read this #SupremeCourt judgment: ${name}${citation ? ', '+citation : ''}`;
            try { await navigator.share({ title: `CiteCase Update`, text: msg, url: url }); } catch (err) { }
        }

        function closeShare() { const modal = document.getElementById('share-modal'); if(modal) { modal.classList.add('hidden'); modal.classList.remove('flex'); } }
        function closeShareOutside(e) { if (e.target === document.getElementById('share-modal')) closeShare(); }

        function highlightText(text, query) { if (!query || !text) return text || ""; const re = new RegExp(`(${query})`, 'gi'); return text.replace(re, '<span class="highlight">$1</span>'); }

        function renderCases(filteredCases, query = "") {
            const resultsTable = document.getElementById('case-results');
            const emptyState = document.getElementById('empty-state');
            const showMoreBtn = document.getElementById('show-more-container');
            const lockSection = document.getElementById('lock-section');
            const stats = document.getElementById('stats');
            if(!resultsTable || !emptyState) return;
            resultsTable.innerHTML = '';
            if(lockSection) lockSection.classList.add('hidden');
            if (filteredCases.length === 0) { emptyState.classList.remove('hidden'); if(showMoreBtn) showMoreBtn.classList.add('hidden'); return; }
            emptyState.classList.add('hidden');
            if(stats) stats.innerText = `${filteredCases.length} Judgments Covered`;
            const sorted = filteredCases.sort((a, b) => { const aHasCite = !!(a.citation && a.citation.trim()); const bHasCite = !!(b.citation && b.citation.trim()); if (aHasCite !== bHasCite) return aHasCite ? -1 : 1; return b.id - a.id; });
            const needsLock = !isUnlocked && sorted.length > FREE_LIMIT;
            const currentLimit = isUnlocked ? displayLimit : FREE_LIMIT;
            const visibleCases = sorted.slice(0, currentLimit);
            visibleCases.forEach(c => {
                const isBlank = !c.name;
                const row = document.createElement('tr');
                row.className = isBlank ? 'bg-slate-50 md:table-row' : 'hover:bg-indigo-50/40 transition-all md:table-row';
                const citeHTML = `<td class="px-0 md:px-6 md:py-5 whitespace-nowrap"><span class="text-[10px] md:text-xs font-black text-slate-700 bg-slate-100 px-2 py-1 rounded inline-block min-w-[60px] text-center">${c.citation ? highlightText(c.citation, query) : '-'}</span></td>`;
                const tagBadges = c.cat ? c.cat.split(',').map(tag => {
                    const cleanTag = tag.trim(); if (!cleanTag) return '';
                    let bgClass = 'bg-slate-100 text-slate-500';
                    if (cleanTag === 'Important') bgClass = 'bg-rose-50 text-rose-600';
                    if (cleanTag === 'Criminal') bgClass = 'bg-slate-800 text-white';
                    if (cleanTag === 'Civil') bgClass = 'bg-indigo-50 text-indigo-600';
                    return `<span class="text-[9px] font-bold px-1.5 py-0.5 rounded ${bgClass} uppercase tracking-tight">${highlightText(cleanTag, query)}</span>`;
                }).join(' ') : '';
                const nameHTML = `<td class="px-0 md:px-6 md:py-5"><div class="text-sm md:text-[15px] font-bold leading-tight">${!isBlank ? `<a href="${c.link}" target="_blank" class="text-slate-800 hover:text-indigo-600 hover:underline transition-colors">${highlightText(c.name, query)}</a>` : `<span class="italic text-slate-400 font-medium text-xs">Will Be Updated Shortly</span>`}</div><div class="mt-1.5 flex flex-wrap gap-1">${tagBadges}</div></td>`;
                const actionHTML = `<td class="px-0 md:px-6 md:py-5 whitespace-nowrap md:text-right">${!isBlank ? `<div class="flex items-center justify-end space-x-2"><button data-tally-open="rjOPV5" data-tally-layout="modal" data-tally-width="250" class="p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all" title="Give Feedback"><i class="fas fa-comment-dots"></i></button><button onclick="openShare('${c.name.replace(/'/g, "\\'")}', '${c.citation}', '${c.link}')" class="p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all" title="Share Update"><i class="fas fa-share-nodes"></i></button></div>` : ''}</td>`;
                row.innerHTML = citeHTML + nameHTML + actionHTML;
                resultsTable.appendChild(row);
            });
            if (needsLock) { if(lockSection) lockSection.classList.remove('hidden'); if(showMoreBtn) showMoreBtn.classList.add('hidden'); }
            else if (sorted.length > displayLimit) { if(showMoreBtn) showMoreBtn.classList.remove('hidden'); }
            else { if(showMoreBtn) showMoreBtn.classList.add('hidden'); }
        }

        function showMore() { displayLimit += 20; handleFilter(); }
        function handleFilter() {
            const input = document.getElementById('search-input');
            const query = input ? input.value.toLowerCase().trim() : '';
            const filtered = cases.filter(c => {
                const searchStr = `${c.name} ${c.citation} ${c.cat}`.toLowerCase();
                const matchesSearch = !query || searchStr.includes(query);
                const matchesCategory = activeFilters.length === 0 || (c.cat && activeFilters.every(f => c.cat.includes(f)));
                return matchesSearch && matchesCategory;
            });
            renderCases(filtered, query);
        }

        function toggleFilter(category) {
            displayLimit = 20;
            if (category === 'Important') { const idx = activeFilters.indexOf('Important'); if (idx > -1) activeFilters.splice(idx, 1); else activeFilters.push('Important'); }
            else { const isSelected = activeFilters.includes(category); activeFilters = activeFilters.includes('Important') ? ['Important'] : []; if (!isSelected) activeFilters.push(category); }
            renderFilterTags(); handleFilter();
        }

        function clearFilters() { activeFilters = []; renderFilterTags(); handleFilter(); }

        window.onload = () => {
            const searchInput = document.getElementById('search-input');
            if(searchInput) searchInput.addEventListener('input', () => { displayLimit = 20; handleFilter(); });
            const codeInput = document.getElementById('unlock-code');
            if(codeInput) codeInput.addEventListener('input', handleUnlockInput);
            loadData(); 
        };
    </script>
</body>
</html>
